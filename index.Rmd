---
title: "ASU CCJ Faculty Pay 2018-2020"
output: 
  html_document:
    theme: yeti
    toc: false
    toc_float: false
    collapsed: false
    smooth_scroll: false
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = TRUE, 
                      message = FALSE, 
                      warning = FALSE, 
                      fig.width = 8, 
                      fig.height = 8,
                      fig.align = "center")

rm(list = ls())

```

```{r, echo = FALSE, eval = TRUE}

library( dplyr )
library( tidyr )
library( ggplot2 )
library( openxlsx )

url <- "https://github.com/jacobtnyoung/CCJfacultysalary/raw/main/salary.data.xlsx"
dat <- read.xlsx( url )

```

<br>

Each year, the [Arizona Republic](https://www.azcentral.com/) publishes the salaries for all Arizona government employees. The data are available [here](https://www.azcentral.com/in-depth/news/local/arizona-data/2021/07/01/az-data-central-2020-arizona-government-salary-database/7535496002/?build=native-web_i_p), but you have to be a subscriber to access the database.

I have put together a spreasheet with these data since I am a subscriber. The spreadsheet is available [here](https://github.com/jacobtnyoung/CCJfacultysalary/raw/main/salary.data.xlsx).

<br> 

### Basic Description {.tabset}

<br>

For some cases there are no values reported. This is because the individual was not yet employed at ASU or they were not in the database (for reasons unknown to me).

Let's start by looking at the data for everyone.

<br>

```{r, echo=FALSE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries (2018 to 2020)" ) +
  theme_minimal()

```

<br>

```{r, echo=FALSE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  facet_grid( rank ~ . , scales = "free_y", labeller = label_both, switch = "y" ) + 
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries by Rank (2018 to 2020)" ) +
  theme_minimal()

```

<br>

```{r, echo=FALSE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  facet_grid( ~ sex , scales = "free_y", labeller = label_both, switch = "y" ) + 
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries by Sex (2018 to 2020)" ) +
  theme_minimal()

```

```{r, echo=FALSE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  facet_grid( rank ~ sex, scales = "free_y", labeller = label_both, switch = "y" ) + 
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries by Rank & Sex (2018 to 2020)" ) +
  theme_minimal()

```


#### 

<br>

#### (**code**)

```{r, echo = TRUE, eval = TRUE}

# Load the libraries we will use.
library( dplyr )
library( tidyr )
library( ggplot2 )
library( openxlsx )


# Get the data.
url <- "https://github.com/jacobtnyoung/CCJfacultysalary/raw/main/salary.data.xlsx"
dat <- read.xlsx( url )


# Take a look at a few cases in the data file.
head( dat )

```

The data are in *long* format. That is, for each year there is a record. (As opposed to *wide* format where each row represents a single case). Let's reshape the data into a format that has yearly values for each individual.

```{r, echo=TRUE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries (2018 to 2020)" ) +
  theme_minimal()

```

<br>

```{r, echo=TRUE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  facet_grid( rank ~ . , scales = "free_y", labeller = label_both, switch = "y" ) + 
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries by Rank (2018 to 2020)" ) +
  theme_minimal()

```

<br>

```{r, echo=TRUE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  facet_grid( ~ sex , scales = "free_y", labeller = label_both, switch = "y" ) + 
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries by Sex (2018 to 2020)" ) +
  theme_minimal()

```

```{r, echo=TRUE, eval=TRUE}

ggplot(
  data = dat, 
  aes( x = year, y = rate, group = ID ) 
  ) +
  geom_line( color = "grey40" ) + 
  geom_point( color = "grey40" ) +
  facet_grid( rank ~ sex, scales = "free_y", labeller = label_both, switch = "y" ) + 
  scale_y_continuous( label = scales::dollar ) +
  scale_x_continuous(
    breaks = c( 2018, 2019, 2020 ),
    label = c( "2018", "2019", "2020" ) 
    ) +
  geom_text( aes( label = l.name ), check_overlap = FALSE, size = 3, color = "darkred" ) +
  ggtitle( "ASU CCJ Faculty Salaries by Rank & Sex (2018 to 2020)" ) +
  theme_minimal()

```


<br>

***Last updated `r format(Sys.time(), '%d %B, %Y')`***
<br>